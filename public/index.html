<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta property="og:image" content="./images/xcphoto.jpeg">
  <title>TeamRuns</title>
  <link rel="icon"  type="image/ico"  href="./images/favicon.ico">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,700&display=swap" rel="stylesheet">  <!-- Compiled and minified CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <link href = "style.css" rel = "stylesheet">
  <link href = "styleDash.css" rel = "stylesheet">
    <script src="https://kit.fontawesome.com/8d5f750f62.js" crossorigin="anonymous"></script>

</head>

<body class="">
  <!-- NAVBAR -->
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <a class="navbar-brand" href="./index" style = "color: white; font-weight: bold; font-size: 50px">Team<i style = "color: white;" class="fas fa-running"></i>Runs</a>


          <ul class="navbar-nav ml-auto" >

            <!-- <li class="nav-item active">
              <a class="nav-link" href="#">About <span class="sr-only">(current)</span></a>
            </li>
             <li class="nav-item active">
              <a class="nav-link" href="#">Contact <span class="sr-only">(current)</span></a>
            </li>-->

            <!-- <li class="nav-item">
              <a class="nav-link" href="#">Link</a>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Dropdown
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                <a class="dropdown-item" href="#">Action</a>
                <a class="dropdown-item" href="#">Another action</a>
                <div class="dropdown-divider"></div>
                <a class="dropdown-item" href="#">Something else here</a>
              </div>
            </li>
            <li class="nav-item">
              <a class="nav-link disabled" href="#"  aria-disabled="true">Disabled</a>
            </li> -->
            <a role = "button"  href = "./about"class="loginButton" style = "cursor: pointer; background: none; border: none; color: white"  >About</a>

                    <a role = "button"  href = "./login"class=""  ><button class="loginButton" style = "background: white; border: none;">Login</button></a>





         </ul>

    </nav>
  <!-- <nav class="z-depth-0 grey lighten-4">
    <div class="nav-wrapper container">
      <a href="#" class="brand-logo">
        <img src="" style="width: 180px; margin-top: 10px;">
      </a>
      <ul id="nav-mobile" class="right hide-on-med-and-down">
          <li class="logged-in" style="display: none;">
            <a href="#" class="grey-text modal-trigger" data-target="modal-account">Account</a>
          </li>
          <li class="logged-in" style="display: none;">
            <a href="#" class="grey-text" id="logout">Logout</a>
          </li>
          <li class="logged-in" style="display: none;">
            <a href="#" class="grey-text modal-trigger" data-target="modal-create">Create Guide</a>
          </li>
          <li class="logged-out" style="display: none;">
            <a href="/login.html" class="grey-text modal-trigger">Login</a>
          </li>
          <li class="logged-out" style="display: none;">
            <a href="/signup.html" class="grey-text modal-trigger" >Sign up</a>
          </li>
        </span>
      </ul>
    </div>
  </nav> -->



  <div class = "background" style = "">


    <div class = "outerBox"  style = "display: flex; justify-content: center;align-items: center;">

        <div class = "heroTagBox" style = "position: relative; text-align: center; background: rgba(0, 0 , 0, 0.0); width: 100%; margin: 10%;">
          <div>
          <h1 class = "tagTitle" style = "margin-top: 17%;" >Farther, Faster, Together</h1>
          <p class = "tagText" style = "color: white; font-size: 21px;">
            Share runs easily with teammates to develop
            a further connected and faster team. <br>
              <a  href = "./signup" class = " signupButton" style = "margin-bottom: 0; display: inline-block" >Signup <i id = "tagArrow"class="fas fa-arrow-right" style = "transition: margin-left 0.25s;"></i></a>
              <i class="fas fa-chevron-down fa-lg" style = "display: block; margin-top: 15px;"></i>
          </p>
        </div>

         </div>

       </div>


  </div>

  <div class = "homeback" style = "padding-top: 50px; padding-bottom: 25px;">
      <div class = "row" style = "">
        <div class = "row" style = "position: relative;">
          <div class = "hometextbox fadein" style = "width: 100%; text-align: center">
            <h1 class = "boxtitle" >Team Oriented Design</h1>
            <p class = "boxtext">Try it out! Click on a team member below to see what they ran on the day.</p>
          </div>

            <div id = "demoSection"  class = "row fadein" style = "width: 100%;">

            </div>

        </div>



        <!-- <div class = "row">

          <div class = "row">

            <div id = "demoselected" class = "col-sm-4 selectedRun" style = "">
            </div>
            <div class = "col-xl-8 activities" style = "">
              <a id = "${postsByDate[i].posts[j].id}" class = "runPost ${postsByDate[i].month}${postsByDate[i].day}${postsByDate[i].year}" style = "cursor: pointer">
              <li class = "postItem"  id = "${post.userid}" >
                  <img  class = "postPfp topPfp" src = "${post.pfp}" width = "40px" height = "40px" style = "border-radius:50%; margin-top: 5px;">
                  <div  class="postTitle topName" style = "font-size: 14px">  ${post.first} <br>${post.last} <br> </div>
                  <div ></div>
                  <div class = "postName"></div>
                  <div class = "postDetails" style = "display: none">
                  <table style = "border-collapse: collapse; width: 100%;">
                  <tr >
                      <th colspan = "4" class = "topRow"><img class = "postPfp" src = "${post.pfp}" width = "40px" height = "40px" style = "border-radius:50%; margin-top: 5px;">
                      <div class="postTitle" style = "font-size: 24px; color: white;">  <span style = "line-height: 45px;">${post.first} ${post.last}</span> </div></th>
                  </tr>
                  <tr>
                    <th>Name</th>
                    <th>Distance</th>
                    <th>Time</th>
                    <th>Pace</th>
                  </tr>
                  <tr>
                    <td>${segment.name}</td>
                    <td>${segment.distance} ${unit}</td>
                    <td>${timeString}</td>
                    <td>${minpace}:${secpace}</td>
                  </tr>
                  <tr>
                    <td><b>Total:</b></td>
                    <td><b>${totalDist.toFixedDown(2)} miles</b></td>
                    <td><b>${timeString}</b></td>
                    <td><b>${totalminpace}:${totalsecpace}</b></td>
                  </tr>
                  </table>
                </li>
                </a>
            </div>
          </div>
          </div>





          <div class = "hometextbox fadeup">

          </div>
        </div> -->
      </div>
    </div>

      <div class = "blueback" style = "padding: 10%; ">
      <div class = "row">
        <div class = "col-sm">
          <div class = "hometextbox fadein" style = "color: white">
            <h1 class = "boxtitle">Posting workouts is a breeze.</h1>
            <p class = "boxtext">Workouts and sessions are much more informative with the ability to view changing paces and distances.</p>
          </div>
        </div>
        <div class = "col-sm">
          <div class = "hometextbox fadeup" >
            <table style="border-collapse: collapse; width: 100%; box-shadow: 0 0 15px rgba(5,5, 5,.4);">
            <tbody><tr>
                <th colspan="4" class="topRow noBorder" style = "background: rgb(230, 230, 230); "><img class="postPfp" src="./images/blankpfp.png" width="40px" height="40px" style="border-radius:50%; margin-top: 5px;">
                <div class="postTitle" style="font-size: 24px; color: black;">  <span style="line-height: 45px;">Cheryl Perry</span> </div></th>
            </tr>
            <tr>
              <th class = "noBorder" >Name</th>
              <th class = "noBorder" >Distance</th>
              <th class = "noBorder" >Time</th>
              <th class = "noBorder" >Pace</th>
            </tr>

            <tr>
              <td class = "noBorder" >Warmup</td>
              <td class = "noBorder" >2 miles</td>
              <td class = "noBorder" >18:46</td>
              <td class = "noBorder" >9:23</td>
            </tr>


            <tr>
              <td class = "noBorder" >800 #1</td>
              <td class = "noBorder" >800 meters</td>
              <td class = "noBorder" >3:25</td>
              <td class = "noBorder" >6:52</td>
            </tr>


            <tr>
              <td class = "noBorder" >800 #2</td>
              <td class = "noBorder" >800 meters</td>
              <td class = "noBorder" >3:22</td>
              <td class = "noBorder" >6:46</td>
            </tr>


            <tr>
              <td class = "noBorder" >Cooldown</td>
              <td class = "noBorder" >1.43 miles</td>
              <td class = "noBorder" >12:22</td>
              <td class = "noBorder" >8:38</td>
            </tr>


            <tr>
              <td class = "noBorder" ><b>Total:</b></td>
              <td class = "noBorder" ><b>4.42 miles</b></td>
              <td class = "noBorder" ><b>37:55</b></td>
              <td class = "noBorder" ><b>8:34</b></td>
            </tr>
            </tbody></table>

          </div>
        </div>
      </div>
      <div class = "row">
        <div class = "col-sm">
          <div class = "hometextbox fadein" style = "color: white">
            <h1 class = "boxtitle">No Watch? Use a Route</h1>
            <p class = "boxtext">Admins and moderators can post commonly run routes and their distances to make it quick and easy to post runs. </p>


          </div>
        </div>
        <div class = "col-sm">
          <div class = "hometextbox fadeup">
            <li class = "routeItem" style = "background: white; margin-bottom: 15px; border-bottom: none; box-shadow: 0 0 15px rgba(5,5, 5,.4);" id = "">
              <div class="routeTitle"> Trail Run - 10.6 miles </div>
              <div class="">To the trail and up the mountain </div>
            </li>
            <li class = "routeItem" style = "background: white; margin-bottom: 15px; border-bottom: none; box-shadow: 0 0 15px rgba(5,5, 5,.4);" id = "">
              <div class="routeTitle"> Middle School Run - 4.23 miles </div>
              <div class="">Run to the local middle School</div>
            </li>
            <li class = "routeItem" style = "background: white; margin-bottom: 15px; border-bottom: none; box-shadow: 0 0 15px rgba(5,5, 5,.4);" id = "">
              <div class="routeTitle">Park Loop - 6.32 miles</div>
              <div class="">Out to the park, around the field, and back</div>
            </li>
          </div>
        </div>

      </div>
    </div>
    <div class = "homeback">
      <div class = "row">

          <div class = "hometextbox fadein" style = "text-align: center; width: 100%; margin-top: 50px;">
            <h1 class = "boxtitle">Analysis to track progress</h1>
            <p class = "boxtext">Get insight on progress over time in terms of mileage and average pace.</p>
          </div>
        </div>
        <div class = "row">
          <div class = "col-sm-6" style = "margin-top: 20px;">

          <div class = "analysisChart fadeup" style = "margin-top: 20px; margin: 0; padding: 30px;">  <p class = "chartTitle">Mileage</p><canvas  id="mileageChart"></canvas></div>
          </div>
            <div class = "col-sm-6" style = "margin-top: 20px;">
          <div class = "analysisChart fadeup" style = "margin-top: 20px; margin: 0; padding: 30px;"><p class = "chartTitle">Average Pace</p><canvas   id="paceChart"></canvas></div>

          </div>

          <div class = "fadeup">
          <!-- <img class = "homeimgfull" src = "./images/home4.png"> -->
          </div>
        </div>

        <div class = "row">
          <div class = "hometextbox fadein" style = "text-align: center; width: 100%; margin-top: 50px;">
            <h1 class = "boxtitle">Team Summaries</h1>
            <p class = "boxtext">Team Admins are able to see full team performances altogether. </p>
          </div>
        </div>
      <div class = "row">

          <div class = "fadeup">
          </div>

          <table class = "fadeup" style = "width: 100%;">
                      <th colspan = "5">
                      <div class = "row">
                        <div class = "col-sm-1" style = "text-align: center; color: rgb(30, 144, 255); font-size: 30px;">

                        </div>
                        <div class = "col-sm-10" style = "text-align: center;font-size: 36px;">
                          <div id = "reportDate" class = "${today.toString()}">

                          </div>
                        </div>
                        <div class = "col-sm-1" style = "text-align: center; color: rgb(30, 144, 255); font-size: 30px;">

                        </div>
                      </div>

                      </th>
                      <tr>
                      <td><b>Name</b></td>
                      <td><b>Route</b></td>
                      <td><b>Distance</b></td>
                      <td><b>Time</b></td>
                      <td><b>Pace</b></td>
                      </tr>

                      <tr>
                      <td><img class = "reportPfp" src = "./images/blankpfp.png" width = "30px" height = "30px" style = "border-radius:50%; margin-right: 10px;"><b>Black Howell</b></td>
                      <td>Park Loop</td>
                      <td>6.12</td>
                      <td>45:24</td>
                      <td>7:25</td>
                      </tr>
                      <tr>
                      <td><img class = "reportPfp" src = "./images/blankpfp.png" width = "30px" height = "30px" style = "border-radius:50%; margin-right: 10px;"><b>Bonnie Ross</b></td>
                      <td>Park Loop</td>
                      <td>6.03</td>
                      <td>51:33</td>
                      <td>8:32</td>
                      </tr>
                      <tr>
                      <td><img class = "reportPfp" src = "./images/blankpfp.png" width = "30px" height = "30px" style = "border-radius:50%; margin-right: 10px;"><b>Fred Clark</b></td>
                      <td> - </td>
                      <td>11</td>
                      <td>1:22:46</td>
                      <td>7:31</td>
                      </tr>
                      <tr>
                      <td><img class = "reportPfp" src = "./images/blankpfp.png" width = "30px" height = "30px" style = "border-radius:50%; margin-right: 10px;"><b>Andrew Smith</b></td>
                      <td> - </td>
                      <td>0</td>
                      <td> - </td>
                      <td> - </td>
                      </tr>
                      </table>


      </div>
      </div>

  <div class = "signupback" style = "margin-top: 100px;">
    <div class = "row">
      <div class = "col-sm" id = "whyUsDiv" style = "border-right: 1px solid white;">
        <div class = "signupsection" style = "text-align: center">
          <h1 class = "boxtitle" style = "color: white;">Why TeamRuns?</h1>
          <p id = "whyUsPara" style = "color: white; font-size: 24px; margin: 0 10%; padding: 30px 0;height: 285px;">TeamRuns hosts a variety of features to ensure you can easily monitor your athletes' progress and learn more from the complex analysis provided for each athlete. We strive to help you focus on what you do best: helping your athletes grow and progress!</p>
          <a  href = "./signup" class = " signupButton" style = "background: white; display: inline-block; color: black; border-color: white;" >Signup</a>
        </div>
      </div>
      <div class = "col-sm">
        <form id = "contactForm" action="https://formspree.io/xjvavdaq" method="POST">
        <h1 class = "boxtitle" style = "color: white;">Contact Us</h1>
        <div class="input-field" style = "width: 60%; margin-left: 20%;">
          <label for="inp" class="inpdark" style = "margin-top: 20px">
            <input name = "email" autocomplete="off" type="email" id="email" placeholder="&nbsp;" required/>
            <span class="labeldark">Email</span>
            <span class="focus-bgdark"></span>
          </label>
          <div class = "emailError error">Invalid Email</div>

        </div>
        <div id = "name" class="input-field" style = "width: 60%; margin-left: 20%;">
          <label for="inp" class="inpdark" style = "margin-top: 20px">
            <input name = "name"autocomplete="off" type="text" id="nameinput" placeholder="&nbsp;"/>
            <span class="labeldark">Name</span>
            <span class="focus-bgdark"></span>
          </label>
          <div class = "firstNameError error">Please enter your name</div>

        </div>
        <div id = "message" class="input-field" style = "width: 60%; margin-left: 20%;">
          <label for="inp" class="inpdark" style = "margin-top: 20px">
            <textarea name = "message" autocomplete="off" type="text" id="messageinput" placeholder="&nbsp;" style = "height: 100px;"></textarea>
            <span class="labeldark">Message</span>
            <span class="focus-bgdark"></span>
          </label>
          <div class = "firstNameError error">Please enter your name</div>

        </div>
        <input  value="Send" type = "submit" id = "contactsubmit" class = " signupButton" style = "background: white; display: inline-block; color: black; border-color: white;" ></input>
        </form>
        </div>
    </div>
  </div>



  <footer style = "width: 100%; height: 100px; background: black;">
    <div  style = " text-align:center;padding-top: 20px;">
        <p style = "width:100%; margin-bottom: 0; ">
          <i style = "color: white;font-size: 36px; " class="fas fa-running"></i> <a href = "mailto:teamrunsexpansion@gmail.com"><i style = "color: white;font-size: 30px; margin: 5px; " class="fas fa-envelope"></i></a> <a href = "https://instagram.com/teamruns"><i style = "color: white;font-size: 30px; margin: 5px;" class="fab fa-instagram"></i></a></p>
        <p style = "width:100%; margin-bottom: 0; color: white;">  &copy;TeamRuns 2020</p>

    </div>
  </footer>

  <script src = "https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
  <script src= "https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.0/jquery.min.js" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
 <!-- The core Firebase JS SDK is always required and must be listed first -->
 <script src="https://www.gstatic.com/firebasejs/6.3.5/firebase-app.js"></script>
 <script src="https://www.gstatic.com/firebasejs/6.3.5/firebase-auth.js"></script>
   <script src="https://www.gstatic.com/firebasejs/6.3.5/firebase-firestore.js"></script>
   <script src="https://www.gstatic.com/firebasejs/6.3.5/firebase-storage.js"></script>

<!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#config-web-app -->
<!-- Initialize Firebase -->

<script>
  // Your web app's Firebase configuration
var firebaseConfig = {
    apiKey: "AIzaSyCklyGxX8Yd3EwOvOdhuaagTN7sN-QhTH0",
    authDomain: "studentapp-a6200.firebaseapp.com",
    databaseURL: "https://studentapp-a6200.firebaseio.com",
    projectId: "studentapp-a6200",
    storageBucket: "studentapp-a6200.appspot.com",
    messagingSenderId: "363683353062",
    appId: "1:363683353062:web:0b5e8fc093528ad7"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);

   // make auth and firestore references
   const auth = firebase.auth();
    const db = firebase.firestore();
</script>
  <!-- Compiled and minified JavaScript -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
  <script src="scripts/auth.js"></script>

  <!-- <script src="scripts/signup.js"></script>
  <script src="scripts/login.js"></script> -->
  <script>
  // document.getElementsByClassName("outerBox")[0].style.paddingTop = window.innerHeight *0.3;
  document.getElementsByClassName("signupButton")[0].onmouseover = function(){

      var yourButton = document.getElementById("tagArrow")
      yourButton.style.marginLeft = yourButton.style.marginLeft === '5px' ? '0' : '5px';
     };
     document.getElementsByClassName("signupButton")[0].onmouseout = function(){

         var yourButton = document.getElementById("tagArrow")
         yourButton.style.marginLeft = yourButton.style.marginLeft === '5px' ? '0' : '5px';
        };


          </script>
          <script src="scripts/index.js"></script>

<script>




var counter = 0;
var isMoving = true;



Number.prototype.toFixedDown = function(digits) {
    var re = new RegExp("(\\d+\\.\\d{" + digits + "})(\\d)"),
        m = this.toString().match(re);
    return m ? parseFloat(m[1]) : this.valueOf();
};



var postList = document.getElementById("demoSection");

var todayDate = new Date();
var days = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
var months = ["January", "February", "March", "April","May", "June", "July", "August", "September", "October", "November", "December"];


document.getElementById("reportDate").innerHTML = days[((new Date).getDay())] + " "+ months[((new Date).getMonth())] +" " + (new Date()).getDate() + ", "  + (new Date()).getFullYear();

var postsByDate = [{
  date: todayDate,
  dayName: days[todayDate.getDay()],
  day: todayDate.getDate(),
  month: months[todayDate.getMonth()],
  year:todayDate.getFullYear(),
  posts: [{
    first: "Blake",
    last: "Howell",
    pfp: "./images/blankpfp.png",
    userid: "1",
    segments: [{
      name: "Park Loop",
      distance: "6.12",
      miles: true,
      hours: 0,
      mins: 45,
      secs: 24
    }]
    },
    {
      first: "Louis",
      last: "Sharp",
      pfp: "./images/blankpfp.png",
      userid: "2",
      segments: [{
        name: "Warmup",
        distance: "2.01",
        miles: true,
        hours: 0,
        mins: 15,
        secs: 43
      },
      {
        name: "School Run",
        distance: "3.67",
        miles: true,
        hours: 0,
        mins: 20,
        secs: 24
      }]

    },

    {
      first: "Bonnie",
      last: "Ross",
      pfp: "./images/blankpfp.png",
      userid: "3",
      segments: [{
        name: "Park Loop",
        distance: "6.03",
        miles: true,
        hours: 0,
        mins: 51,
        secs: 33
      }]
      },

      {
        first: "Kelly",
        last: "Diaz",
        pfp: "./images/blankpfp.png",
        userid: "3",
        segments: [{
          name: "Shakeout Run",
          distance: "2.98",
          miles: true,
          hours: 0,
          mins: 27,
          secs: 13
        }]
        },
        {
          first: "Ralph",
          last: "Mitchell",
          pfp: "./images/blankpfp.png",
          userid: "5",
          segments: [{
            name: "School Lap",
            distance: "1.53",
            miles: true,
            hours: 0,
            mins: 9,
            secs: 16
          },
          {
            name: "School Lap",
            distance: "1.53",
            miles: true,
            hours: 0,
            mins: 9,
            secs: 16
          },
          {
            name: "School Lap",
            distance: "1.53",
            miles: true,
            hours: 0,
            mins: 9,
            secs: 16
          }
          ]
          },
          {
            first: "Linda",
            last: "Jackson",
            pfp: "./images/blankpfp.png",
            userid: "3",
            segments: [{
              name: "Tempo",
              distance: "6",
              miles: true,
              hours: 0,
              mins: 43,
              secs: 54
            }]
          },
          {
            first: "Fred",
            last: "Clark",
            pfp: "./images/blankpfp.png",
            userid: "3",
            segments: [{
              name: "Long Run",
              distance: "11",
              miles: true,
              hours: 1,
              mins: 22,
              secs: 46
            }]
          },
          {
            first: "Cheryl",
            last: "Perry",
            pfp: "./images/blankpfp.png",
            userid: "3",
            segments: [{
              name: "Warmpup",
              distance: "2",
              miles: true,
              hours: 0,
              mins: 18,
              secs: 46
            },
            {
              name: "800 #1",
              distance: "800",
              miles: false,
              hours: 0,
              mins: 3,
              secs: 25
            },
            {
              name: "800 #2",
              distance: "800",
              miles: false,
              hours: 0,
              mins: 3,
              secs: 22
            },
            {
              name: "Cooldown",
              distance: "1.43",
              miles: true,
              hours: 0,
              mins: 12,
              secs: 22
            }]
          }]


}];



//loop through dates
for (var i = 0; i < postsByDate.length; i++) {

    //add date to postsList and divs
    postList.innerHTML+= `<div class = "dateSection" style = "  margin-bottom: 50px; width: 100%;">
    <h1 class = "dateTitle">${postsByDate[i].dayName} ${postsByDate[i].month} ${postsByDate[i].day}, ${postsByDate[i].year}</h1>
    <div class = "row">

      <div id = "${postsByDate[i].month}${postsByDate[i].day}${postsByDate[i].year}selected" class = "col-sm-4 selectedRun" style = "">
      </div>
      <div class = "col-xl-8 activities" style = "">
      </div>
    </div>
    </div>
      `;
      postsByDate[i].posts = mergeSortAlpha(postsByDate[i].posts);
    //add posts of date to activities section
    for (var j = 0; j < postsByDate[i].posts.length; j++) {

      var post = postsByDate[i].posts[j];
      var li = ``





      if(post.userid != null)
      {
          var totalDist = 0;
          var totalTime = 0;
          var totalHours = 0;
          var totalMinutes = 0;
          var totalSeconds = 0;
          post.segments.forEach(segment => {
            if(segment.distance != 0)
            {
              if(!segment.miles)
              {

                totalDist += parseFloat(segment.distance)*0.000621371;
              }
              else {

                totalDist += parseFloat(segment.distance);

              }
              totalTime += segment.hours*3600;
              totalTime += segment.mins*60;
              totalTime += segment.secs;
              totalHours = Math.trunc(totalTime/3600);
              totalMinutes = Math.trunc((totalTime%3600)/60);
              totalSeconds = (totalTime%3600)%60;
            }

          });
      li = `
        <a id = "${postsByDate[i].posts[j].id}" class = "runPost ${postsByDate[i].month}${postsByDate[i].day}${postsByDate[i].year}" style = "cursor: pointer">
        <li class = "postItem"  id = "${post.userid}" >`;

        li+= `
            <img  class = "postPfp topPfp" src = "${post.pfp}" style = "border-radius:50%; margin-top: 5px;">
            <div  class="postTitle topName" style = "font-size: 14px">  ${post.first} <br>${post.last} <br> </div>
            <div ></div>
            <div class = "postName"></div>
            <div class = "postDetails" style = "display: none">
            <table style = "border-collapse: collapse; width: 100%;">
            <tr >
                <th colspan = "4" class = "topRow noBorder"><img class = "postPfp" src = "${post.pfp}"  style = "border-radius:50%; margin-top: 5px;">
                <div class="postTitle" style = "font-size: 24px; color: white;">  <span style = "line-height: 45px;">${post.first} ${post.last}</span> </div></th>
            </tr>
            <tr >
              <th class = "noBorder">Name</th>
              <th class = "noBorder">Distance</th>
              <th class = "noBorder">Time</th>
              <th class = "noBorder">Pace</th>
            </tr>
            `;

      post.segments.forEach(segment => {
          if(segment.distance != 0)
          {
            var unit = "miles";
            if(!segment.miles)
            {
              unit = "meters"
            }

            var time = 0;
            time += segment.hours*3600;
            time += segment.mins*60;
            time += segment.secs;
            segment.hours = Math.trunc(time/3600);
            segment.mins = Math.trunc((time%3600)/60);
            segment.secs = (time%3600)%60;

            var timeString = getTimeStr(segment.hours, segment.mins, segment.secs);


            var hour = 0;
            var minute = 0;
            var second = 0;
            time = 0;
            var distance = 0;
            var pace;
            var minpace;
            var secpace;

            if(segment.distance != 0)
            {

              if(!segment.miles)
              {
                distance = parseFloat(segment.distance)*0.000621371;
              }
              else {
                distance = parseFloat(segment.distance);
              }
              time += segment.hours*3600;
              time += segment.mins*60;
              time += segment.secs;

              pace = time/distance;
              minpace = Math.trunc(pace/60);
              secpace = Math.trunc(pace%60);
              if(secpace < 10)
                secpace = "0"+ secpace;
            }



            li+= `
            <tr>
              <td class = "noBorder">${segment.name}</td>
              <td class = "noBorder">${segment.distance} ${unit}</td>
              <td class = "noBorder">${timeString}</td>
              <td class = "noBorder">${minpace}:${secpace}</td>
            </tr>

            `
          }
      });

      var timeString = getTimeStr(totalHours, totalMinutes, totalSeconds);

      var totalpace;
      var totalminpace;
      var totalsecpace;

      totalpace = totalTime/totalDist;
      totalminpace = Math.trunc(totalpace/60);
      totalsecpace = Math.trunc(totalpace%60);
      if(totalsecpace < 10)
        totalsecpace = "0"+ totalsecpace;

        li +=`
            <tr>
              <td class = "noBorder"><b>Total:</b></td>
              <td class = "noBorder"><b>${totalDist.toFixedDown(2)} miles</b></td>
              <td class = "noBorder"><b>${timeString}</b></td>
              <td class = "noBorder"><b>${totalminpace}:${totalsecpace}</b></td>
            </tr>
            </table>`;


      }
      var activites = document.querySelectorAll(".activities");
      activites[i].innerHTML += li;

    }

    //var activites = document.querySelectorAll(".activities");

    //selected[i].innerHTML = postsByDate[i].posts[0]


    // = document.querySelectorAll(".postItem")[0].innerHTML;
    //document.querySelectorAll(".postDetails")[0].style.display = "block";

}

for (var i = 0; i < postsByDate.length; i++) {
  var runPosts = document.querySelectorAll(".runPost");

  for (var k = 0; k < runPosts.length; k++) {
    if(runPosts[k].classList.contains(`${postsByDate[i].month}${postsByDate[i].day}${postsByDate[i].year}`))
    {

      var selected = document.querySelectorAll(".selected");
      var runPosts = document.querySelectorAll(".runPost");
      var postItems = document.querySelectorAll(".postItem");
      var topPfps = document.querySelectorAll(".topPfp");
      var topNames = document.querySelectorAll(".topName");
      var postDetails = document.querySelectorAll(".postDetails");
      postDetails[k+i].style.display = "block";
      topPfps[k+i].style.display = "none";
      topNames[k+i].style.display = "none";
      var postTitles = postItems[k].querySelectorAll(".postTitle");
      var org =  postTitles[0];
      org.style.fontSize = "20px";

      document.querySelector(`#${postsByDate[i].month}${postsByDate[i].day}${postsByDate[i].year}selected`).innerHTML = postItems[k].innerHTML;
      if($(`#${postsByDate[i].month}${postsByDate[i].day}${postsByDate[i].year}selected`).find('i').length > 0)
        $(`#${postsByDate[i].month}${postsByDate[i].day}${postsByDate[i].year}selected`).find('i')[0].remove();
      document.querySelector(`#${postsByDate[i].month}${postsByDate[i].day}${postsByDate[i].year}selected`).style.borderLeft = "0px solid rgb(30, 144, 255)";
      //document.querySelector(`#${postsByDate[i].month}${postsByDate[i].day}${postsByDate[i].year}selected`).style.borderTop = "10px solid rgb(30, 144, 255)";

      postItems[k].classList.add("curSelected");
      org.style.fontSize = "14px";
      postDetails[k+i].style.display = "none";
      topPfps[k+i].style.display = "block";
      topNames[k+i].style.display = "block";
      break;
    }
  }
}

var mobwidth = 1200;

if(window.innerWidth < mobwidth)
{
  $(".postItem").css("width", "100%");
  $(".postItem").css("margin-top", "15px");
}

//document.querySelectorAll(".posts")[0].style.display = "block";





//click listeners to change selected post
var runPosts = document.querySelectorAll('.runPost');



for (var i = 0; i < runPosts.length; i++) {
  runPosts[i].addEventListener("click", function(e){
    e.preventDefault();


    if(this.children[0].classList.length == 1)
    {

      for (var i = 0; i < runPosts.length; i++) {

        if(runPosts[i].classList.contains(this.classList[1]))
        {
            if(runPosts[i].children[0].classList.contains("curSelected"))
              runPosts[i].children[0].classList.remove("curSelected")
            var selectedRuns = document.querySelectorAll('.selectedRun');
            for (var j = 0; j < selectedRuns.length; j++) {
              if(selectedRuns[j].id == (this.classList[1] + "selected"))
              {
                var postDetails = this.querySelectorAll(".postDetails");
                var postTitles = this.querySelectorAll(".postTitle");
                var topPfps = this.querySelectorAll(".topPfp");
                var org = postDetails[0];
                var org2 =  postTitles[0];
                var org3 =  topPfps[0];

                org2.style.display = "none";
                org3.style.display = "none";

                org.style.display = "block";

                selectedRuns[j].innerHTML = this.children[0].innerHTML;
                if($(selectedRuns[j]).find('i').length > 0)
                  $(selectedRuns[j]).find('i')[0].remove();
                org.style.display = "none";
                org2.style.display = "block";
                  org3.style.display = "block";
                this.children[0].classList.add("curSelected");
                break;
              }
            }
        }
      }
    }

    // for (var i = 0; i < postItems.length; i++) {
    //   if(postItems[i].classList.contains("curSelected"))
    //
    // }
    // postItems[i].classList.add("curSelected");
  });
}


// Merge Sort Implentation (Recursion)
function mergeSortAlpha (unsortedArray) {
  // No need to sort the array if the array only has one element or empty
  if (unsortedArray.length <= 1) {
    return unsortedArray;
  }
  // In order to divide the array in half, we need to figure out the middle
  const middle = Math.floor(unsortedArray.length / 2);

  // This is where we will be dividing the array into left and right
  const left = unsortedArray.slice(0, middle);
  const right = unsortedArray.slice(middle);

  // Using recursion to combine the left and right
  return mergeAlpha(
    mergeSortAlpha(left), mergeSortAlpha(right)
  );
}


// Merge the two arrays: left and right
function mergeAlpha (left, right) {
  let resultArray = [], leftIndex = 0, rightIndex = 0;

  // We will concatenate values into the resultArray in order
  while (leftIndex < left.length && rightIndex < right.length) {
    if ((left[leftIndex].first+left[leftIndex].last).localeCompare(right[rightIndex].first+right[rightIndex].last) == -1 ) {
      resultArray.push(left[leftIndex]);
      leftIndex++; // move left array cursor
    } else {
      resultArray.push(right[rightIndex]);
      rightIndex++; // move right array cursor
    }
  }

  // We need to concat here because there will be one element remaining
  // from either left OR the right
  return resultArray
          .concat(left.slice(leftIndex))
          .concat(right.slice(rightIndex));
}

function getTimeStr(hours, mins, secs)
{
  var timeString = "";
  timeString += (hours > 0) ? (hours+":") : "";
  timeString += (mins == 0 && hours > 0) ? "00:" : "";
  timeString += (mins > 0 && mins < 10 && hours==0) ? (mins+":") : "";
  timeString += (mins > 0 && mins < 10 && hours>0) ? ("0"+mins+":") : "";
  timeString += (mins >=10) ? (mins+":") : "";
  timeString += (secs == 0 && mins > 0) ? "00" : "";
  timeString += (secs == 0 && mins == 0 && hours > 0 ) ? "00" : "";
  timeString += (secs == 0 && mins == 0 && hours == 0 ) ? "0" : "";
  timeString += (secs > 0 && secs < 10) ? ("0"+secs) : "";
  timeString += (secs >=10) ? (secs) : "";
  return timeString;
}

var ctx = document.getElementById('mileageChart').getContext('2d');
try {
    mchart.destroy();
} catch (e) {

}
mchart = new Chart(ctx, {
    // The type of chart we want to create
    type: 'line',

    // The data for our dataset
    data: {

        labels: ["4/5 - 4/11", "4/12 - 4/18", "4/19 - 4/25"],
        datasets: [{
            // trendlineLinear: {
            //   style: "rgb(30, 144, 255)",
            //   lineStyle: "dotted",
            //     width: 2
            // },
            lineTension: 0,
            backgroundColor: 'transparent',
            borderColor: 'rgb(30, 144, 255)',
            data: [32.73, 42.10, 37.57],
            pointRadius: 5,
            backgroundColor: "rgba(0, 83, 152, 0.1)",
            pointHoverRadius: 7,
            pointBackgroundColor: 'rgb(30, 144, 255)'
        }]
    },


    // Configuration options go here
    options:
    {

      legend: {
        display: false
      },
      scales: {
        yAxes: [{
            ticks: {
                beginAtZero: true
            }
        }]
      }


    }
});
var paceChart = document.getElementById('paceChart').getContext('2d');
try {
    pchart.destroy();
} catch (e) {

}

pchart = new Chart(paceChart, {
    // The type of chart we want to create
    type: 'line',

    // The data for our dataset
    data: {

        labels: ["4/5 - 4/11", "4/12 - 4/18", "4/19 - 4/25"],
        datasets: [{
            // trendlineLinear: {
            //   style: "rgb(30, 144, 255)",
            //   lineStyle: "dotted",
            //     width: 2
            // },
            lineTension: 0,
            backgroundColor: 'transparent',
            borderColor: 'rgb(30, 144, 255)',
            pointRadius: 5,
            backgroundColor: "rgba(0, 83, 152, 0.1)",
            pointHoverRadius: 7,
            pointBackgroundColor: 'rgb(30, 144, 255)',
            fill: "start",
            data: [456, 408, 426]

        }]
    },


    // Configuration options go here
    options:
    {

      legend: {
        display: false
      },
      responsive: true,
            maintainAspectRatio: true,
            scales: {
              yAxes: [{
                ticks: {
                  userCallback: function(v) { return epoch_to_mm_ss(v) },
                  stepSize: 30,
                  reverse: true
                }
              }]
            },
            tooltips: {
              callbacks: {
                label: function(tooltipItem, data) {
                  return  epoch_to_mm_ss(tooltipItem.yLabel)
                }
              }
            }


    }
});





function epoch_to_mm_ss(epoch) {

  return new Date(epoch*1000).toISOString().substr(14, 5);
}



</script>
</body>
</html>
